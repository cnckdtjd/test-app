1. 프로젝트 개요
    1.1 프로젝트 배경
        목적: 3,000~10,000명의 동시 접속 사용자가 접속했을 때, 웹 어플리케이션이 안정적으로 동작하고 성능을 발휘할 수 있는지 검증하기 위한 테스트 환경 구축.
        목표: 실제 서비스 운영 전, 부하 테스트와 각종 시나리오(로그인/인증, 상품 등록 및 조회, 장바구니, 주문, 데이터 롤백 등)를 통해 병목 지점, 동시성 이슈, DB 트랜잭션 처리 성능을 확인하여 개선점을 도출.
    
    1.2 주요 요구사항
        로그인/인증: Spring Security를 이용한 기본 인증 기능 도입.
        상품 데이터 관리: 등록/수정/삭제/조회, 대량 상품 처리 시의 성능 평가.
        장바구니 기능: 다수 사용자의 동시 장바구니 업데이트 부하 테스트.
        주문 처리: 주문 및 결제 프로세스 모의 환경(가짜 결제 API)에서의 트랜잭션 처리 및 장애 대비 테스트.
        관리자 기능: 1만 명 이상의 사용자, 10만 개 이상의 상품 데이터를 빠르게 롤백/복구 가능하도록 기능 구현.
        기술 스택: Spring Boot, Spring Web, Spring Data JPA, Lombok, Spring Validation, Spring Security, Thymeleaf, MariaDB.
        배포 환경: 초기에는 Linux 서버, 이후 Docker 및 Kubernetes 환경으로 확장 배포 예정.
   
    1.3 목표 일정(마일스톤)
        1) MVP 개발 (1~2개월 내)
            로그인/인증, 상품(과목) 데이터 CRUD, 장바구니, 주문 처리, 관리자 롤백 기능 초안 완성.
        2) 부하 테스트 준비 (MVP 검증 후 1~2주)
            JMeter 스크립트 작성 및 시나리오 구성.
            마리아DB 인덱스·파티셔닝 등 최적화 작업 초안.
        3) 부하 테스트 수행 및 결과 분석 (1~2주)
            동시접속 3,000명 → 5,000명 → 10,000명 단계별 부하 테스트.
            지표 수집(응답 속도, 자원 사용량, DB 트랜잭션 처리량 등).
        4) 결과 보고 & 향후 개선 (연속)
            병목 지점 파악 및 코드/아키텍처/DB 최적화.
            MSA 전환 혹은 확장 고려 사항 정리.
2. 유저 플로우(시나리오)
   2.1 일반 사용자(End User) 시나리오
       1) 로그인
           사용자는 회원가입된 계정(또는 Fake ID)으로 로그인 시도.
           잘못된 비밀번호 입력 시 로그인 실패 처리, 3회 이상 실패 시 계정 잠금 시뮬레이션(옵션).
       2) 상품(과목) 조회
           메인 화면 혹은 카테고리에서 상품 목록 조회.
           페이징, 정렬, 검색(필터링) 기능 테스트.
       3) 장바구니 담기 및 수정
           상품을 장바구니에 추가/삭제 및 개수 변경.
           재고 부족 혹은 품절 상품 시 예외 처리 시나리오.
       4) 주문(모의 결제 포함)
           장바구니에 담긴 상품 주문 요청.
           결제 모의 API(실제 결제 서비스 대체)를 통한 트랜잭션 처리.
           결제 오류, 주문 취소, 환불 처리 시나리오 테스트.
       5) 로그아웃
           세션 만료 혹은 사용자에 의한 로그아웃.
   
   2.2 관리자(Admin) 시나리오
       1) 로그인
          관리자 권한으로 접속.
       2) 대량 데이터 생성/관리
          Faker 라이브러리나 SQL/파이썬 스크립트 등을 통해 1만 명 이상의 사용자 계정, 10만 건 이상의 상품 데이터를 생성.
          생성된 데이터 확인 및 일부 수정/삭제.
       3) 롤백/복구 기능
          테스트 시나리오 진행 후, DB를 초기 상태 혹은 특정 시점으로 되돌리는 기능.
          대량 트랜잭션 처리 성능 및 정상 동작 검증.

3. 핵심 기능
   3.1 로그인/인증
       Spring Security 적용.
       세션 및 JWT 중 선택 가능(초기에는 세션 기반).
       비밀번호 정책, 계정 잠금(옵션) 시나리오 포함.
       상품 데이터 등록 및 조회
    
   3.2 등록/수정/삭제/조회 API 구현.
       동시성 이슈(여러 사용자가 동시에 수정/삭제 요청) 처리.
       캐싱(인기 상품/과목) 적용 여부 테스트. 
   
   3.3 장바구니 기능
       사용자별 세션/쿠키 기반 장바구니 관리.
       장바구니 상품의 수량 변경, 삭제, 품절 처리 등의 예외 시나리오 반영.
   
   3.4 주문 처리
       주문 + 결제 + 재고 관리를 한 트랜잭션으로 처리(또는 Saga 패턴 고려).
       결제 API 모의 처리(성공/실패/오류) 시나리오 테스트.
       주문 이력 조회 및 취소/환불 프로세스 구현.
   
   3.5 관리자용 롤백 기능
       테스트 데이터(1만 명의 사용자, 10만 개의 상품 등) 생성 스크립트/코드.
       DB 테이블 전체 또는 특정 부분을 빠르게 롤백하는 기능 지원. 
   3.6 부하 테스트 시나리오 확장
       네트워크 지연/타임아웃, DB 장애, 세션 증가 시 성능 검증.
       다른 시나리오와 결합(장바구니에서 품절된 상품이 포함된 대량 주문 요청 등).

4. 기술 스택
   4.1 프레임워크 & 언어
       Spring Boot (JDK 17)
           Spring Web (REST API 구축)
           Spring Data JPA (ORM 및 DB 접근)
           Lombok (개발 생산성 향상)
           Spring Validation (요청 파라미터 검증)
           Spring Security (기본 보안 및 인증)
           Thymeleaf (단순 프론트엔드 템플릿, 관리자 페이지/테스트 페이지 구성)
   4.2 데이터베이스
       MariaDB
           InnoDB 엔진 권장.
           인덱스 설계, 파티셔닝 전략 검토(대량 데이터 대비).
   4.3 배포 및 운영 환경
       Linux 서버 (개발 환경 및 초기 테스트)
       Docker / Kubernetes (클라우드 네이티브 확장 배포 예정)
       CI/CD 파이프라인 도입 검토(Jenkins, GitLab CI 등)
   4.4 부가 툴
       Faker (Mock 데이터 생성 라이브러리)
       Apache JMeter (부하 테스트 도구)
       Git, Maven/Gradle, IDE(IntelliJ 등)

5. 전체 아키텍처 설계
   5.1 개념적 아키텍처(초기 모놀리식 구조)
   ┌─────────────────────────────────────────┐
   │               End User                  │
   │  (브라우저 / 모바일 / 기타 클라이언트)          │
   └─────────────────────────────────────────┘
                ▼ (HTTP/HTTPS)
   ┌─────────────────────────────────────────┐
   │          Spring Boot App                │
   │  - Spring Web, Spring Data JPA,         │
   │    Spring Security, Thymeleaf, etc.     │
   │  - Controller / Service / Repository    │
   └─────────────────────────────────────────┘
                  ▼ (JDBC)
   ┌─────────────────────────────────────────┐
   │               MariaDB                   │
   │      (데이터 저장 및 트랜잭션 관리)            │
   └─────────────────────────────────────────┘
       단일 모듈로 구성, MSA 전환은 추후 고려.
       REST API를 기반으로 서비스, Controller에서 DB 연동(Service → Repository → DB).
       Thymeleaf 템플릿을 통해 간단한 UI 페이지 제공(관리자 페이지, 테스트용 UI).
   
   5.2 데이터 흐름
         1) 로그인
            사용자는 /login API 혹은 /login 페이지 요청 → Spring Security 인증 과정 → 세션 혹은 JWT 생성.
         2) 상품(과목) 조회
            Controller 호출 → Service에서 JPA Repository로 검색 쿼리 → DB 응답 후 결과 반환 → Thymeleaf나 JSON으로 응답.
         3) 장바구니/주문 처리
            Controller에서 Service 호출 → DB 트랜잭션(주문 → 결제 → 재고 차감) → Commit/Rollback 여부 결정.
         4) 관리자 롤백
            특정 테이블 또는 전체 DB에 대한 롤백 스크립트 실행 → MariaDB 백업/트랜잭션/프로시저 등을 활용해 복구.
   5.3 동시성 처리
        Optimistic Lock / Pessimistic Lock 설정 여부 검토.
        DB 인덱스/쿼리 튜닝으로 병목 최소화.
        Connection Pool(HikariCP 등) 최적화.
6. MVP 기능 및 구현 범위
   6.1 MVP 범위
       로그인/인증: Spring Security 기본 로그인 폼, 세션 기반 인증.
       상품(과목) CRUD: REST API + Thymeleaf 통한 테스트 UI.
       장바구니: 단일 사용자 관점에서 CRUD 가능, 동시성 이슈 최소한의 처리.
       주문 처리: 단순 결제(모의 API) & 주문 내역 저장, DB 트랜잭션(Commit/Rollback) 확인.
       관리자 기능: 대량 데이터 생성(예: Faker + SQL + 파이썬), 롤백(간단한 스크립트 형태).
   6.2 MVP 이후 개선/추가 고려 사항
       1) MSA 전환
          로그인/회원, 상품, 장바구니, 주문 등 각 도메인을 분리하여 독립 배포 및 스케일링.
       2) 고급 모니터링
          APM(Application Performance Monitoring) 도입(New Relic, Prometheus/Grafana 등).
       3) 고급 보안
          OAuth2, JWT 토큰 검증, 다양한 Role-Based Access Control(RBAC).
       4) 고도화된 캐싱
          Redis를 이용한 세션 클러스터링, 인기 상품 캐싱, 분산 락 처리.
       5) 데이터베이스 최적화
          대규모 트래픽 대비 파티셔닝, 샤딩, 인덱스 재설계.
       6) DevOps
          CI/CD 파이프라인 구축, 테스트 자동화(JUnit, Testcontainers 등), Kubernetes 오토스케일링 설정.
       7) 실제 결제 연동
          PG(결제 게이트웨이) API 연동 테스트 및 장애 대비 로직 추가.
7. 성능 및 부하 테스트 전략
   7.1 테스트 도구: Apache JMeter
       사용자 시나리오(로그인 → 조회 → 장바구니 추가 → 주문)를 스크립트로 작성.
       동시 사용자 3,000 → 5,000 → 10,000 단계별 테스트.
   7.2 지표 수집
       응답 시간(평균/최대), TPS, 에러율, DB Connection 사용량, CPU/메모리 사용량, GC 횟수 등.
   7.3 DB 최적화
       빈번히 호출되는 쿼리에 인덱스 생성.
       필요 시 파티셔닝(예: 월 단위 주문 테이블).
       DB Connection Pool(HikariCP) 파라미터 조정. 
   7.4 장애/지연 시뮬레이션
       네트워크 지연(TC), DB 장애(접속 끊김) 시나리오를 JMeter나 Chaos Monkey 등으로 시뮬레이션.
   7.5 분산 테스트
       필요 시 JMeter 클러스터(마스터-슬레이브) 구성, 대규모 트래픽 부하 분산 발생.
8. 결론 및 요약
  본 PRD에서는 3000~10000명 동시 접속을 목표로 하는 부하테스트용 웹 어플리케이션의 핵심 기능(로그인, 상품/장바구니/주문, 관리자 롤백), 기술 스택(Spring Boot & MariaDB 등), 아키텍처 설계(초기 모놀리식 구조), MVP 구현 범위를 정의하였습니다.
MVP 단계에서는 빠른 프로토타이핑과 간단한 기능 구현을 통해 부하테스트 시나리오를 손쉽게 구성하고, 안정성을 검증하는 데 집중합니다.
향후 단계에서 MSA 구조로 확장하거나, 고급 모니터링/보안/DB 최적화 등을 도입하여 실제 대규모 트래픽도 안정적으로 처리할 수 있도록 개선합니다.
이 문서는 팀 내 개발 방향과 일정을 조율하는 데 활용되고, 기능 구현 세부사항(예: API 스펙, ERD, 시퀀스 다이어그램)은 별도의 설계 문서에서 구체화합니다.
추가적인 요구사항이나 정책 변경 시 본 PRD를 지속적으로 업데이트하며, 전체 프로젝트 진행 상황에 맞추어 보완하는 것을 권장합니다.

주의사항: 본 문서에 포함된 스크립트나 내부 구현 정보는 외부로 공개되지 않도록 유의해야 합니다. 내부 테스트와 검증 용도로만 사용하시기 바랍니다.