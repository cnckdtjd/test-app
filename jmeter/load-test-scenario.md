# Test App 부하 테스트 시나리오

## 1. 테스트 목적
- 동시 접속 사용자 3,000명에서 10,000명까지 확장 시 시스템 성능 검증
- 주요 비즈니스 플로우(로그인, 상품 조회, 장바구니 추가, 주문 처리)의 안정성 및 응답 시간 테스트
- 시스템 병목 구간 식별 및 성능 튜닝 기회 발견

## 2. 테스트 환경
- 애플리케이션 서버: Spring Boot 3.4.3, JDK 17
- 데이터베이스: MariaDB 11.x
- 테스트 도구: Apache JMeter 5.6.2

## 3. 테스트 시나리오

### 시나리오 1: 기본 사용자 플로우
1. 홈페이지 접속 (`GET /`)
2. 로그인 (`POST /login`)
3. 상품 목록 조회 (`GET /products`)
4. 상품 상세 정보 조회 (`GET /products/{id}`)
5. 장바구니에 상품 추가 (`POST /cart/add`)
6. 장바구니 조회 (`GET /cart`)
7. 주문 생성 (`POST /orders/create`)
8. 주문 확인 (`GET /orders/{id}`)
9. 로그아웃 (`POST /logout`)

### 시나리오 2: 대시보드 접근 (관리자)
1. 홈페이지 접속 (`GET /`)
2. 관리자 로그인 (`POST /login` - 관리자 계정)
3. 관리자 대시보드 접속 (`GET /admin`)
4. 사용자 목록 조회 (`GET /admin/users`)
5. 상품 목록 조회 (`GET /admin/products`)
6. 주문 목록 조회 (`GET /admin/orders`) 
7. 로그아웃 (`POST /logout`)

### 시나리오 3: 상품 검색 및 필터링
1. 홈페이지 접속 (`GET /`)
2. 상품 목록 조회 (`GET /products`)
3. 검색어로 상품 필터링 (`GET /products?name=검색어`)
4. 카테고리별 상품 필터링 (`GET /products?category=CATEGORY`)
5. 검색어와 카테고리 조합 필터링 (`GET /products?name=검색어&category=CATEGORY`)

## 4. 부하 테스트 패턴

### 테스트 1: 점진적 사용자 증가
- 시작: 100명의 가상 사용자
- 30초마다 100명씩 사용자 증가
- 최대: 3,000명의 동시 사용자
- 지속 시간: 30분
- 측정 지표: 평균 응답 시간, 처리량(TPS), 오류율

### 테스트 2: 최대 부하 테스트
- 시작: 1,000명의 가상 사용자
- 30초마다 1,000명씩 사용자 증가
- 최대: 10,000명의 동시 사용자
- 지속 시간: 15분
- 측정 지표: 평균 응답 시간, 처리량(TPS), 오류율, 시스템 자원 사용률

### 테스트 3: 장시간 안정성 테스트
- 고정 사용자: 5,000명의 동시 사용자
- 지속 시간: 2시간
- 측정 지표: 메모리 누수, CPU 사용률, 응답 시간 변화

## 5. 성능 목표
- 응답 시간: 평균 1초 이내 (95% 요청)
- 처리량: 초당 트랜잭션 수 최소 100 TPS
- 오류율: 총 요청의 1% 미만
- 시스템 안정성: 2시간 연속 테스트 동안 장애 없음

## 6. 모니터링 방법
- JMX를 통한 JVM 모니터링 (메모리, GC)
- Spring Actuator 엔드포인트를 통한 애플리케이션 지표 수집
- MariaDB 성능 지표 모니터링
- 서버 자원 사용률(CPU, Memory, Disk I/O, Network) 모니터링

## 7. JMeter 구성
- Thread Group: 시나리오별 스레드 그룹 생성
- HTTP Request: 각 API 요청 구성
- CSV Data Set Config: 테스트 데이터 로드
- Response Assertion: 응답 검증
- Summary Report: 결과 수집 및 보고
- Backend Listener: InfluxDB/Grafana 연동 구성

## 8. 테스트 데이터 준비
- 사용자 계정: 최소 10,000개
- 상품: 최소 1,000개
- 카테고리: 5개
- 주문 데이터: 초기 상태 빈 상태

## 9. 테스트 결과 분석
- 응답 시간 분포 (평균, 중앙값, 90/95/99 백분위수)
- 초당 처리량(TPS) 변화 그래프
- 오류율 및 오류 유형 분석
- 시스템 자원 사용률과 성능 지표 상관 관계
- 병목 구간 식별 및 개선 방안 도출 